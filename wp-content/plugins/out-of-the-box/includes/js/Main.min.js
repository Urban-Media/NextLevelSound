function initate_out_of_the_box(){jQuery(function(t){"use strict";function e(e,o){if(void 0===_DBcache[o]&&(_DBcache[o]={}),void 0===_DBcache[o][e]||t.isEmptyObject(_DBcache[o][e]))return!1;var a=Math.round((new Date).getTime()/1e3);return _DBcache[o][e].expires<a?(_DBcache[o][e]={},!1):_DBcache[o][e]}function o(e,o,a){t(".OutoftheBox[data-token='"+a+"'] .loading").fadeTo(400,1),void 0===_DBcache[a]&&(_DBcache[a]={}),_DBcache[a][o]=e,t(".OutoftheBox[data-token='"+a+"'] .ajax-filelist").html(e.html),t(".OutoftheBox[data-token='"+a+"'] .nav-title").html(e.breadcrumb),t(".OutoftheBox[data-token='"+a+"'] .current-folder-raw").text(e.rawpath),null!==e.lastpath&&t(".OutoftheBox[data-token='"+a+"']").attr("data-path",e.lastpath),t(".OutoftheBox[data-token='"+a+"'] .loading").fadeOut(400),s(a)}function a(a,i){var n=a.listtoken,r=t(".OutoftheBox[data-token='"+n+"']").attr("data-list"),l=t(".OutoftheBox[data-token='"+n+"']").attr("data-path"),d=t(".OutoftheBox[data-token='"+n+"']").attr("data-sort"),u=t(".OutoftheBox[id$='search-"+n+"'] .search-input").val(),c="outofthebox-get-filelist",h=t(".OutoftheBox[data-token='"+n+"']").attr("data-deeplink"),f=OutoftheBox_vars.refresh_nonce;"gallery"===r&&(c="outofthebox-get-gallery",f=OutoftheBox_vars.gallery_nonce),void 0!==u&&u.length>2&&"Search filenames"!==u&&(a.query=u),void 0!==i&&(_DBcache=[]),a.deeplink=h,a.sort=d,a.action=c,a.mobile=mobile,a._ajax_nonce=f,a.lastpath=l;var p=JSON.stringify(a).hashCode(),m=!1;if(!1!==(m=e(p,n)))return o(m,p,n);void 0!==i&&(a.hardrefresh=!0),t.ajax({type:"POST",url:OutoftheBox_vars.ajax_url,data:a,beforeSend:function(){t(".OutoftheBox[data-token='"+n+"'] .no_results").remove(),t(".OutoftheBox[data-token='"+n+"'] .loading").removeClass("initialize upload error"),t(".OutoftheBox[data-token='"+n+"'] .loading").fadeTo(400,1)},complete:function(){t(".OutoftheBox[data-token='"+n+"'] .loading").removeClass("search")},success:function(e){null!==e&&0!==e?o(e,p,n):(t(".OutoftheBox[data-token='"+n+"'] .nav-title").html(OutoftheBox_vars.str_no_filelist),t(".OutoftheBox[data-token='"+n+"'] .loading").addClass("error"),s(n))},error:function(){t(".OutoftheBox[data-token='"+n+"'] .nav-title").html(OutoftheBox_vars.str_no_filelist),t(".OutoftheBox[data-token='"+n+"'] .loading").addClass("error"),s(n)},dataType:"json"})}function i(e){var o=e.listtoken,i=t(".OutoftheBox[data-token='"+o+"']").attr("data-path");e.lastpath=i,t.ajax({type:"POST",url:OutoftheBox_vars.ajax_url,data:e,beforeSend:function(){t(".OutoftheBox[data-token='"+o+"'] .loading").fadeTo(400,1)},complete:function(){a({listtoken:o},"hardrefresh"),"undefined"!=typeof modal_action&&modal_action.close()},success:function(e){void 0!==e&&void 0!==e.lastpath&&null!==e.lastpath&&t(".OutoftheBox[data-token='"+o+"']").attr("data-path",e.lastpath)},dataType:"json"})}function n(){t(".OutoftheBox.gridgallery .image-folder").each(function(){t(this).find(".folder-thumb").fadeIn(1500);var e=Math.floor(3e3*Math.random())+1500;t(this).find(".thumb3").delay(e).fadeOut(1500),t(this).find(".thumb2").delay(e+1500).delay(e).fadeOut(1500),t(this).find(".thumb3").delay(2*(e+1500)).delay(e).fadeIn(1500)})}function s(e){t(".OutoftheBox[data-token='"+e+"']").hasClass("gridgallery")&&updateCollage(e),t(".OutoftheBox[data-token='"+e+"'] .entry").unbind("hover"),t(".OutoftheBox[data-token='"+e+"'] .entry").hover(function(){t(this).addClass("hasfocus")},function(){t(this).removeClass("hasfocus")}),t(".OutoftheBox[data-token='"+e+"'] .entry").on("mouseover",function(){t(this).addClass("hasfocus")}),t(".OutoftheBox[data-token='"+e+"'] .entry").unbind("click"),t(".OutoftheBox[data-token='"+e+"'] .entry").click(function(){t(this).find('.entry_checkbox input[type="checkbox"]').trigger("click")}),t(".OutoftheBox[data-token='"+e+"'] .entry .entry_edit_menu").each(function(){t(this).click(function(t){t.stopPropagation()}),t(this).qtip({content:{text:t(this).next(".oftb-dropdown-menu")},position:{my:"top center",at:"bottom center",target:t(this),scroll:!1,viewport:t(".OutoftheBox[data-token='"+e+"']")},show:{event:"click",solo:!0},hide:{event:"mouseleave unfocus",delay:200,fixed:!0},events:{show:function(t,e){e.elements.target.closest(".entry").addClass("hasfocus").addClass("popupopen")},hide:function(t,e){e.elements.target.closest(".entry").removeClass("hasfocus").removeClass("popupopen")}},style:{classes:"OutoftheBox "+OutoftheBox_vars.content_skin}})});var o=t.noop;o=function(){if(t(".OutoftheBox[data-token='"+e+"'] .image-container.entry:not(.hidden-for-gallery):last()").isOnScreen(.1,.1)){var a=t(".OutoftheBox[data-token='"+e+"']").attr("data-loadimages"),i=t(".OutoftheBox[data-token='"+e+"'] .image-container:hidden:lt("+a+")");i.length>0?(i.each(function(){t(this).fadeIn(500),t(this).removeClass("hidden-for-gallery"),t(this).find("img").removeClass("hidden-for-gallery")}),t(".OutoftheBox[data-token='"+e+"']").find("img.preloading").not(".hidden-for-gallery").unveil(200,t(window),function(){t(this).load(function(){t(this).removeClass("preloading").removeAttr("data-src"),t(this).prev(".preloading").remove()})})):t(window).off("scroll",o)}}.debounce(50),t(window).on("scroll",o),t(window).trigger("scroll"),t("#OutoftheBox .entry.moveable").length>0&&(t("#OutoftheBox .entry").not(".parentfolder").draggable({revert:"invalid",stack:"#OutoftheBox .entry",cursor:"move",containment:"parent",distance:50,delay:50,start:function(e,o){t(this).addClass("isdragged"),t(this).css("transform","scale(0.8)")},stop:function(e,o){setTimeout(function(){t(this).removeClass("isdragged")},300),t(this).css("transform","scale(1)")}}),t("#OutoftheBox .entry.folder").droppable({accept:t("#OutoftheBox .entry"),activeClass:"ui-state-hover",hoverClass:"ui-state-active",drop:function(e,o){var a=o.draggable.closest(".OutoftheBox").attr("data-token");t(o.draggable).fadeOut(500),i({action:"outofthebox-move-entry",OutoftheBoxpath:o.draggable.attr("data-url"),copy:!1,target:t(this).attr("data-url"),listtoken:a,_ajax_nonce:OutoftheBox_vars.move_nonce})}})),t(".OutoftheBox[data-token='"+e+"'] .folder, .OutoftheBox[data-token='"+e+"'] .image-folder").unbind("click"),t(".OutoftheBox[data-token='"+e+"'] .folder, .OutoftheBox[data-token='"+e+"'] .image-folder").click(function(o){if(t(this).hasClass("isdragged"))return!1;t(".OutoftheBox[id$='search-"+e+"'] .search-input").val(""),a({OutoftheBoxpath:t(this).closest(".folder, .image-folder").attr("data-url"),listtoken:e}),o.stopPropagation()}),t(".OutoftheBox[data-token='"+e+"'] .image-container .image-rollover").css("opacity","0"),t(".OutoftheBox[data-token='"+e+"'] .image-container").hover(function(){t(this).find(".image-rollover").stop().animate({opacity:1},400)},function(){t(this).find(".image-rollover").stop().animate({opacity:0},400)});var n=[];void 0===DB_iLightbox[e]?DB_iLightbox[e]={}:t.isEmptyObject(DB_iLightbox[e])||DB_iLightbox[e].destroy(),t('.OutoftheBox[data-token="'+e+'"] .ilightbox-group[rel^="ilightbox["]').each(function(){var e=this.getAttribute("rel");-1===t.inArray(e,n)&&n.push(e)}),t.each(n,function(o,a){var i=t('.OutoftheBox[data-token="'+e+'"]');DB_iLightbox[e]=t('.OutoftheBox[data-token="'+e+'"] .ilightbox-group[rel="'+a+'"]').iLightBox({skin:OutoftheBox_vars.lightbox_skin,path:OutoftheBox_vars.lightbox_path,maxScale:1,slideshow:{pauseOnHover:!0,pauseTime:i.attr("data-pausetime"),startPaused:"gallery"!==i.attr("data-list")||"1"!==i.attr("data-slideshow")},controls:{slideshow:"gallery"===i.attr("data-list"),arrows:!0,thumbnail:!mobile},caption:{start:"mouseenter"===OutoftheBox_vars.lightbox_showcaption,show:OutoftheBox_vars.lightbox_showcaption,hide:"mouseenter"===OutoftheBox_vars.lightbox_showcaption?"mouseleave":OutoftheBox_vars.lightbox_showcaption},keepAspectRatio:!0,callback:{onBeforeLoad:function(e,o){t(".ilightbox-holder").addClass("OutoftheBox"),t(".ilightbox-holder").find("iframe").addClass("oftb-embedded"),t(".ilightbox-holder .oftb-hidepopout").remove(),t(".ilightbox-holder").find(".oftb-embedded").after('<div class="oftb-hidepopout">&nbsp;</div>'),m()},onBeforeChange:function(){var e=t(".ilightbox-holder video, .ilightbox-holder audio");t.each(e,function(t,e){!1===e.paused&&e.pause()})},onAfterChange:function(e){var o=e.currentElement.find("video, audio");t.each(o,function(t,e){e.paused&&e.play()})},onRender:function(e,o){var a=t(".ilightbox-holder").find("video, audio");t.each(a,function(o,a){var i=t(this);a.addEventListener("playing",function(){var t=e.currentElement.find(".ilightbox-container").width()-1,o=e.currentElement.find(".ilightbox-container").height()-1;i.width(t),i.parent().width(t),i.height()>e.currentElement.find(".ilightbox-container").height()-2&&i.height(o)},!1),i.find("source").attr("src",i.find("source").attr("data-src"))})},onShow:function(e,o){0===e.currentElement.find(".empty_iframe").length&&e.currentElement.find(".oftb-embedded").after(OutoftheBox_vars.str_iframe_loggedin),e.currentElement.find("iframe").length>0&&setTimeout(function(){e.currentElement.find(".oftb-embedded").width(e.currentElement.find(".ilightbox-container").width()-1)},500),e.currentElement.find(".empty_iframe").hide(),0!==e.currentElement.find("img").length&&setTimeout(function(){e.currentElement.find(".empty_iframe").fadeIn()},5e3);var a=e.currentElement.find("video, audio");t.each(a,function(t,e){e.paused&&e.play()}),t(".OutoftheBox .ilightbox-container img").on("contextmenu",function(t){return"Yes"===OutoftheBox_vars.lightbox_rightclick})}},errors:{loadImage:OutoftheBox_vars.str_imgError_title,loadContents:OutoftheBox_vars.str_xhrError_title},text:{next:OutoftheBox_vars.str_next_title,previous:OutoftheBox_vars.str_previous_title,slideShow:OutoftheBox_vars.str_startslideshow}})}),t("#OutoftheBox .entry").on("contextmenu",function(t){return!1}),t(".OutoftheBox[data-token='"+e+"'] .entry_checkbox").unbind("click"),t(".OutoftheBox[data-token='"+e+"'] .entry_checkbox").click(function(t){return t.stopPropagation(),!0}),t(".OutoftheBox[data-token='"+e+"'] .entry_checkbox :checkbox").click(function(e){t(this).prop("checked")?t(this).closest(".entry").addClass("isselected"):t(this).closest(".entry").removeClass("isselected")}),t(".OutoftheBox[data-token='"+e+"'] .entry_linkto").unbind("click"),t(".OutoftheBox[data-token='"+e+"'] .entry_linkto").click(function(e){var o=t(this).parent().attr("data-name"),a=decodeURIComponent(t(this).parent().attr("data-url")),i=t(".outofthebox .thickbox_opener").find("[data-user-id]").attr("data-user-id");return t(".thickbox_opener").hasClass("private-folders-auto")?(t(".thickbox_opener").find(".private-folders-auto-current").val(a),t(".thickbox_opener").find(".private-folders-auto-input-id").val(a),t(".thickbox_opener").find(".private-folders-auto-input-name").val(a),t(".thickbox_opener").find(".private-folders-auto-button").removeClass("disabled").find(".oftb-spinner").fadeOut(),tb_remove(),e.stopPropagation(),!0):t(".thickbox_opener").hasClass("woocommerce_upload_location")?(t("#woocommerce_outofthebox-woocommerce_upload_location_id").val(folder_id),t("#woocommerce_outofthebox-woocommerce_upload_location").val(o),tb_remove(),e.stopPropagation(),!0):(t.ajax({type:"POST",url:OutoftheBox_vars.ajax_url,data:{action:"outofthebox-linkusertofolder",id:a,text:a,userid:i,_ajax_nonce:OutoftheBox_vars.createlink_nonce},beforeSend:function(){tb_remove(),t(".outofthebox .thickbox_opener").find(".oftb-spinner").show()},complete:function(){t(".oftb-spinner").hide()},success:function(e){"1"===e?(t(".outofthebox .thickbox_opener").parent().find(".column-private_folder").text(a),t(".outofthebox .thickbox_opener .unlinkbutton").removeClass("hidden"),t(".outofthebox .thickbox_opener .linkbutton").addClass("hidden"),t(".outofthebox .thickbox_opener").removeClass("thickbox_opener")):location.reload(!0)},dataType:"text"}),e.stopPropagation(),!0)}),t(".OutoftheBox[data-token='"+e+"'] .entry_woocommerce_link").unbind("click"),t(".OutoftheBox[data-token='"+e+"'] .entry_woocommerce_link").click(function(e){var o=t(this).parent().attr("data-url"),a=t(this).attr("data-filename");return tb_remove(),window.wc_outofthebox.afterFileSelected(o,a),e.stopPropagation(),!0}),t(".OutoftheBox[data-token='"+e+"'] .entry_action_view").unbind("click"),t(".OutoftheBox[data-token='"+e+"'] .entry_action_view").click(function(){t(".qtip.OutoftheBox").qtip("hide");var o=t(this).closest("ul").attr("data-path");t(".OutoftheBox[data-token='"+e+"'] .entry[data-url='"+o+"']").find(".entry_link")[0].click()}),t(".OutoftheBox[data-token='"+e+"'] .entry_action_download").unbind("click"),t(".OutoftheBox[data-token='"+e+"'] .entry_action_download").click(function(e){e.stopPropagation();var o=t(this).attr("href");return sendGooglePageView("Download",t(this).attr("data-filename")),setTimeout(function(){window.location=o},300),!1}),t(".OutoftheBox[data-token='"+e+"'] .entry_action_shortlink").unbind("click"),t(".OutoftheBox[data-token='"+e+"'] .entry_action_shortlink").click(function(){t(".qtip.OutoftheBox").qtip("hide");var o=t(this).closest("ul").attr("data-path"),a=t(".OutoftheBox[data-token='"+e+"'] .entry[data-url='"+o+"']").attr("data-url"),i=t(".OutoftheBox[data-token='"+e+"'] .entry[data-url='"+o+"']").attr("data-name");t("#outofthebox-modal-action").remove();var n="";n+='<button class="button outofthebox-modal-confirm-btn" data-action="confirm" type="button" title="'+OutoftheBox_vars.str_create_shared_link+'" >'+OutoftheBox_vars.str_create_shared_link+"</button>",n+='<button class="button outofthebox-modal-cancel-btn" data-action="cancel" type="button" onclick="modal_action.close();" title="'+OutoftheBox_vars.str_close_title+'" >'+OutoftheBox_vars.str_close_title+"</button>";var s=t('<a tabindex="0" class="close-button" title="'+OutoftheBox_vars.str_close_title+'" onclick="modal_action.close();"><i class="fa fa-times fa-lg" aria-hidden="true"></i></a></div>'),r=t('<div class="outofthebox-modal-body" tabindex="0" ></div>'),l=t('<div class="outofthebox-modal-footer"><div class="outofthebox-modal-buttons">'+n+"</div></div>"),d=t('<div id="outofthebox-modal-action" class="OutoftheBox outofthebox-modal '+OutoftheBox_vars.content_skin+'"><div class="modal-dialog"><div class="modal-content"></div></div></div>');t("body").append(d),t("#outofthebox-modal-action .modal-content").append(s,r,l),t.ajax({type:"POST",url:OutoftheBox_vars.ajax_url,data:{action:"outofthebox-create-link",listtoken:e,OutoftheBoxpath:a,_ajax_nonce:OutoftheBox_vars.createlink_nonce},complete:function(){t("#outofthebox-modal-action .outofthebox-modal-confirm-btn").remove()},success:function(e){null!==e&&(null!==e.link?(t(".outofthebox-modal-body").append('<input type="text" class="shared-link-url" value="'+e.link+'" style="width: 98%;" readonly/><div class="outofthebox-shared-social"></div>'),sendGooglePageView("Create shared link"),t(".outofthebox-shared-social").jsSocials({url:e.link,text:i+" | ",showLabel:!1,showCount:"inside",shareIn:"popup",shares:["email","twitter","facebook","googleplus","linkedin","pinterest","whatsapp"]})):t(".outofthebox-modal-body").find(".shared-link-url").val(e.error))},dataType:"json"});var u=new RModal(document.getElementById("outofthebox-modal-action"),{dialogOpenClass:"animated slideInDown",dialogCloseClass:"animated slideOutUp",escapeClose:!0});return document.addEventListener("keydown",function(t){u.keydown(t)},!1),u.open(),window.modal_action=u,t("#outofthebox-modal-action .outofthebox-modal-confirm-btn").prop("disabled",!0),t("#outofthebox-modal-action .outofthebox-modal-confirm-btn").html('<i class="fa fa-cog fa-spin fa-fw"></i><span> '+OutoftheBox_vars.str_processing+"</span>"),!1}),t(".OutoftheBox[data-token='"+e+"'] .entry_action_delete").unbind("click"),t(".OutoftheBox[data-token='"+e+"'] .entry_action_delete").click(function(){t(".qtip.OutoftheBox").qtip("hide");var o=t(this).closest("ul").attr("data-path"),a=t(".OutoftheBox[data-token='"+e+"'] .entry[data-url='"+o+"']").attr("data-name");t(".OutoftheBox[data-token='"+e+"'] .entry[data-url='"+o+"']").attr("data-url");t("#outofthebox-modal-action").remove();var n="";n+='<button class="button outofthebox-modal-confirm-btn" data-action="confirm" type="button" title="'+OutoftheBox_vars.str_delete_title+'" >'+OutoftheBox_vars.str_delete_title+"</button>",n+='<button class="button outofthebox-modal-cancel-btn" data-action="cancel" type="button" onclick="modal_action.close();" title="'+OutoftheBox_vars.str_cancel_title+'" >'+OutoftheBox_vars.str_cancel_title+"</button>";var s=t('<a tabindex="0" class="close-button" title="'+OutoftheBox_vars.str_close_title+'" onclick="modal_action.close();"><i class="fa fa-times fa-lg" aria-hidden="true"></i></a></div>'),r=t('<div class="outofthebox-modal-body" tabindex="0" >'+OutoftheBox_vars.str_delete+"</br></br><strong>"+a+"</strong></div>"),l=t('<div class="outofthebox-modal-footer"><div class="outofthebox-modal-buttons">'+n+"</div></div>"),d=t('<div id="outofthebox-modal-action" class="OutoftheBox outofthebox-modal '+OutoftheBox_vars.content_skin+'"><div class="modal-dialog"><div class="modal-content"></div></div></div>');t("body").append(d),t("#outofthebox-modal-action .modal-content").append(s,r,l),t("#outofthebox-modal-action .outofthebox-modal-confirm-btn").unbind("click"),t("#outofthebox-modal-action .outofthebox-modal-confirm-btn").click(function(){i({action:"outofthebox-delete-entry",entries:[a],listtoken:e,_ajax_nonce:OutoftheBox_vars.delete_nonce}),t("#outofthebox-modal-action .outofthebox-modal-confirm-btn").prop("disabled",!0),t("#outofthebox-modal-action .outofthebox-modal-confirm-btn").html('<i class="fa fa-cog fa-spin fa-fw"></i><span> '+OutoftheBox_vars.str_processing+"</span>")});var u=new RModal(document.getElementById("outofthebox-modal-action"),{dialogOpenClass:"animated slideInDown",dialogCloseClass:"animated slideOutUp",escapeClose:!0});return document.addEventListener("keydown",function(t){u.keydown(t)},!1),u.open(),window.modal_action=u,!1}),t(".OutoftheBox[data-token='"+e+"'] .entry_action_rename").unbind("click"),t(".OutoftheBox[data-token='"+e+"'] .entry_action_rename").click(function(){t(".qtip.OutoftheBox").qtip("hide");var o=t(this).closest("ul").attr("data-path"),a=t(".OutoftheBox[data-token='"+e+"'] .entry[data-url='"+o+"']").attr("data-name"),n=t(".OutoftheBox[data-token='"+e+"'] .entry[data-url='"+o+"']").attr("data-url");t("#outofthebox-modal-action").remove();var s="";s+='<button class="button outofthebox-modal-confirm-btn" data-action="rename" type="button" title="'+OutoftheBox_vars.str_rename_title+'" >'+OutoftheBox_vars.str_rename_title+"</button>",s+='<button class="button outofthebox-modal-cancel-btn" data-action="cancel" type="button" onclick="modal_action.close();" title="'+OutoftheBox_vars.str_cancel_title+'" >'+OutoftheBox_vars.str_cancel_title+"</button>";var r='<input id="outofthebox-modal-rename-input" name="outofthebox-modal-rename-input" type="text" value="'+a+'" style="width:100%"/>',l=t('<a tabindex="0" class="close-button" title="'+OutoftheBox_vars.str_close_title+'" onclick="modal_action.close();"><i class="fa fa-times fa-lg" aria-hidden="true"></i></a></div>'),d=t('<div class="outofthebox-modal-body" tabindex="0" >'+OutoftheBox_vars.str_rename+"<br/>"+r+"</div>"),u=t('<div class="outofthebox-modal-footer"><div class="outofthebox-modal-buttons">'+s+"</div></div>"),c=t('<div id="outofthebox-modal-action" class="OutoftheBox outofthebox-modal '+OutoftheBox_vars.content_skin+'"><div class="modal-dialog"><div class="modal-content"></div></div></div>');t("body").append(c),t("#outofthebox-modal-action .modal-content").append(l,d,u),t("#outofthebox-modal-action #outofthebox-modal-rename-input").unbind("keyup"),t("#outofthebox-modal-action #outofthebox-modal-rename-input").on("keyup",function(e){13!=e.which&&13!=e.keyCode||t("#outofthebox-modal-action .outofthebox-modal-confirm-btn").trigger("click")}),t("#outofthebox-modal-action .outofthebox-modal-confirm-btn").unbind("click"),t("#outofthebox-modal-action .outofthebox-modal-confirm-btn").click(function(){var o=t("#outofthebox-modal-rename-input").val();/[<>:"/\\|?*]/g.test(t("#outofthebox-modal-rename-input").val())?(t("#outofthebox-modal-action .outofthebox-modal-error").remove(),t("#outofthebox-modal-rename-input").after('<div class="outofthebox-modal-error">'+OutoftheBox_vars.str_rename_failed+"</div>"),t("#outofthebox-modal-action .outofthebox-modal-error").fadeIn()):(i({action:"outofthebox-rename-entry",OutoftheBoxpath:n,newname:encodeURIComponent(o),listtoken:e,_ajax_nonce:OutoftheBox_vars.rename_nonce}),t("#outofthebox-modal-action .outofthebox-modal-confirm-btn").prop("disabled",!0),t("#outofthebox-modal-action .outofthebox-modal-confirm-btn").html('<i class="fa fa-cog fa-spin fa-fw"></i><span> '+OutoftheBox_vars.str_processing+"</span>"))});var h=new RModal(document.getElementById("outofthebox-modal-action"),{dialogOpenClass:"animated slideInDown",dialogCloseClass:"animated slideOutUp",escapeClose:!0});return document.addEventListener("keydown",function(t){h.keydown(t)},!1),h.open(),window.modal_action=h,!1}),t(".OutoftheBox[data-token='"+e+"'] .newfolder").unbind("click"),t(".OutoftheBox[data-token='"+e+"'] .newfolder").click(function(){t(".qtip.OutoftheBox").qtip("hide"),t("#outofthebox-modal-action").remove();var o="";o+='<button class="button outofthebox-modal-confirm-btn" data-action="rename" type="button" title="'+OutoftheBox_vars.str_addfolder_title+'" >'+OutoftheBox_vars.str_addfolder_title+"</button>",o+='<button class="button outofthebox-modal-cancel-btn" data-action="cancel" type="button" onclick="modal_action.close();" title="'+OutoftheBox_vars.str_cancel_title+'" >'+OutoftheBox_vars.str_cancel_title+"</button>";var a=t('<a tabindex="0" class="close-button" title="'+OutoftheBox_vars.str_close_title+'" onclick="modal_action.close();"><i class="fa fa-times fa-lg" aria-hidden="true"></i></a></div>'),n=t('<div class="outofthebox-modal-body" tabindex="0" >'+OutoftheBox_vars.str_addfolder+' <br/><input type="text" id="outofthebox-modal-addfolder-input" name="outofthebox-modal-addfolder-input" value="" style="width:100%"/></div>'),s=t('<div class="outofthebox-modal-footer"><div class="outofthebox-modal-buttons">'+o+"</div></div>"),r=t('<div id="outofthebox-modal-action" class="OutoftheBox outofthebox-modal '+OutoftheBox_vars.content_skin+'"><div class="modal-dialog"><div class="modal-content"></div></div></div>');t("body").append(r),t("#outofthebox-modal-action .modal-content").append(a,n,s),t("#outofthebox-modal-action #outofthebox-modal-addfolder-input").unbind("keyup"),t("#outofthebox-modal-action #outofthebox-modal-addfolder-input").on("keyup",function(e){13!=e.which&&13!=e.keyCode||t("#outofthebox-modal-action .outofthebox-modal-confirm-btn").trigger("click")}),t("#outofthebox-modal-action .outofthebox-modal-confirm-btn").unbind("click"),t("#outofthebox-modal-action .outofthebox-modal-confirm-btn").click(function(){var o=t("#outofthebox-modal-addfolder-input").val();/[<>:"/\\|?*]/g.test(t("#outofthebox-modal-addfolder-input").val())?(t("#outofthebox-modal-action .outofthebox-modal-error").remove(),t("#outofthebox-modal-addfolder-input").after('<div class="outofthebox-modal-error">'+OutoftheBox_vars.str_rename_failed+"</div>"),t("#outofthebox-modal-action .outofthebox-modal-error").fadeIn()):(i({action:"outofthebox-add-folder",newfolder:encodeURIComponent(o),listtoken:e,_ajax_nonce:OutoftheBox_vars.addfolder_nonce}),t("#outofthebox-modal-action .outofthebox-modal-confirm-btn").prop("disabled",!0),t("#outofthebox-modal-action .outofthebox-modal-confirm-btn").html('<i class="fa fa-cog fa-spin fa-fw"></i><span> '+OutoftheBox_vars.str_processing+"</span>"))});var l=new RModal(document.getElementById("outofthebox-modal-action"),{dialogOpenClass:"animated slideInDown",dialogCloseClass:"animated slideOutUp",escapeClose:!0});return document.addEventListener("keydown",function(t){l.keydown(t)},!1),l.open(),window.modal_action=l,!1})}function r(e,o){var a=t(".OutoftheBox[data-token='"+e.listtoken+"']").find('input[name="maxfilesize"]').val(),i=t(".OutoftheBox[data-token='"+e.listtoken+"']").find('input[name="maxnumberofuploads"]').val(),n=new RegExp(t(".OutoftheBox[data-token='"+e.listtoken+"']").find('input[name="acceptfiletypes"]').val(),"i");if(e.error=!1,e.name.length&&!n.test(e.name)&&(e.error=OutoftheBox_vars.acceptFileTypes),""!==a&&e.size>0&&e.size>a&&(e.error=OutoftheBox_vars.maxFileSize),i>0&&_>i){var s=!0;t.each(_DBuploads[e.listtoken],function(){this.name===e.name&&(s=!1,_--)}),s&&(e.error=OutoftheBox_vars.maxNumberOfFiles)}return e}function l(e){t.ajax({type:"POST",url:OutoftheBox_vars.ajax_url,data:{action:"outofthebox-upload-file",type:"get-status",listtoken:e.listtoken,hash:e.hash,_ajax_nonce:OutoftheBox_vars.upload_nonce},success:function(t){null!==t&&(void 0!==t.status?("starting"!==t.status.progress&&"uploading"!==t.status.progress||setTimeout(function(){l(t.file)},1500),c(t.file,{percentage:50+t.status.percentage/2,progress:t.status.progress})):(e.error=OutoftheBox_vars.str_error,h(e)))},error:function(t){e.error=OutoftheBox_vars.str_error,h(e)},complete:function(t){},dataType:"json"})}function d(e){var o=t(".OutoftheBox[data-token='"+e.listtoken+"']").find(".template-row").clone().removeClass("template-row");return o.attr("data-file",e.name).attr("data-id",e.hash),o.find(".file-name").text(e.name),"undefined"!==e.size&&e.size>0&&o.find(".file-size").text(humanFileSize(e.size,!0)),o.find(".upload-thumbnail img").attr("src",p(e)),o.addClass("template-upload"),o.find(".upload-status").removeClass().addClass("upload-status queue").text(OutoftheBox_vars.str_inqueue),o.find(".upload-status-icon").removeClass().addClass("upload-status-icon fa fa-circle"),t(".OutoftheBox[data-token='"+e.listtoken+"'] .fileupload-list .files").append(o),t('.OutoftheBox .fileuploadform[data-token="'+e.listtoken+'"] div.fileupload-drag-drop').fadeOut(),void 0!==e.error&&!1!==e.error&&h(e),o}function u(e){var o=t(".OutoftheBox[data-token='"+e.listtoken+"'] .fileupload-list [data-id='"+e.hash+"']");o.find(".upload-status").removeClass().addClass("upload-status succes").text(OutoftheBox_vars.str_uploading_local),o.find(".upload-status-icon").removeClass().addClass("upload-status-icon fa fa-circle-o-notch fa-spin"),o.find(".upload-progress").slideDown(),t('input[type="submit"]').prop("disabled",!0)}function c(e,o){var a=t(".OutoftheBox[data-token='"+e.listtoken+"'] .fileupload-list [data-id='"+e.hash+"']");a.find(".progress").attr("aria-valuenow",o.percentage).children().first().fadeIn().animate({width:o.percentage+"%"},"fast"),"uploading_to_cloud"===o.progress&&a.find(".upload-status").text(OutoftheBox_vars.str_uploading_cloud),"finished"===o.progress||o.progress}function h(e){var o=t(".OutoftheBox[data-token='"+e.listtoken+"'] .fileupload-list [data-id='"+e.hash+"']");o.addClass("template-download").removeClass("template-upload"),o.find(".file-name").text(e.name),o.find(".upload-thumbnail img").attr("src",p(e)),o.find(".upload-progress").slideUp(),void 0!==e.error&&!1!==e.error?(o.find(".upload-status").removeClass().addClass("upload-status error").text(OutoftheBox_vars.str_error),o.find(".upload-status-icon").removeClass().addClass("upload-status-icon fa fa-exclamation-circle"),o.find(".upload-error").text(e.error).slideUp().delay(500).slideDown(),_--):(o.find(".upload-status").removeClass().addClass("upload-status succes").text(OutoftheBox_vars.str_success),o.find(".upload-status-icon").removeClass().addClass("upload-status-icon fa fa-check-circle"),void 0===b[e.listtoken]&&(b[e.listtoken]=[]),b[e.listtoken].push(e.fileid)),t(".OutoftheBox[data-token='"+e.listtoken+"'] .fileupload-list").find(".template-upload").length<1&&(clearTimeout(_uploadPostProcesstimer),_uploadPostProcesstimer=setTimeout(function(){f(e.listtoken)},1e3)),o.closest(".gform_wrapper").length>0||!0===t(".OutoftheBox[data-token='"+e.listtoken+"']").hasClass("upload")||(o.delay(5e3).animate({opacity:"0"},"slow",function(){t(this).remove()}),t(".OutoftheBox[data-token='"+e.listtoken+"'] .fileupload-list").find(".template-upload").length<1&&t('.OutoftheBox .fileuploadform[data-token="'+e.listtoken+'"]').find("div.fileupload-drag-drop").fadeIn())}function f(e){t.ajax({type:"POST",url:OutoftheBox_vars.ajax_url,data:{action:"outofthebox-upload-file",type:"upload-postprocess",listtoken:e,files:b[e],_ajax_nonce:OutoftheBox_vars.upload_nonce},success:function(o){null!==o&&(b[e]=[],void 0===_DBuploads[e]&&(_DBuploads[e]={}),t.each(o.files,function(t,o){_DBuploads[e][t]={name:o.name,path:o.completepath,size:o.filesize,link:o.link}}),t('.OutoftheBox .fileuploadform[data-token="'+e+'"] .fileupload-filelist').val(JSON.stringify(_DBuploads[e])))},error:function(t){},complete:function(o){if(!1===t(".OutoftheBox[data-token='"+e+"']").hasClass("upload")){var i={listtoken:e};_DBcache=[],clearTimeout(_updatetimer),a(i,"hardrefresh")}t(".gform_button:submit").prop("disabled",!1).fadeTo(400,1),t('input[type="submit"]').prop("disabled",!1)},dataType:"json"})}function p(t){var e=OutoftheBox_vars.plugin_url+"/css/icons/128x128/";if(void 0===t.thumbnail||null===t.thumbnail||""===t.thumbnail){var o;return o=void 0===t.type||null===t.type?"unknown":t.type.indexOf("word")>=0?"application-msword":t.type.indexOf("excel")>=0||t.type.indexOf("spreadsheet")>=0?"application-vnd.ms-excel":t.type.indexOf("powerpoint")>=0||t.type.indexOf("presentation")>=0?"application-vnd.ms-powerpoint":t.type.indexOf("access")>=0||t.type.indexOf("mdb")>=0?"application-vnd.ms-access":t.type.indexOf("image")>=0?"image-x-generic":t.type.indexOf("audio")>=0?"audio-x-generic":t.type.indexOf("video")>=0?"video-x-generic":t.type.indexOf("pdf")>=0?"application-pdf":t.type.indexOf("zip")>=0||t.type.indexOf("archive")>=0||t.type.indexOf("tar")>=0||t.type.indexOf("compressed")>=0?"application-zip":t.type.indexOf("html")>=0?"text-xml":t.type.indexOf("application/exe")>=0||t.type.indexOf("application/x-msdownload")>=0||t.type.indexOf("application/x-exe")>=0||t.type.indexOf("application/x-winexe")>=0||t.type.indexOf("application/msdos-windows")>=0||t.type.indexOf("application/x-executable")>=0?"application-x-executable":t.type.indexOf("text")>=0?"text-x-generic":"unknown",e+o+".png"}return t.thumbnail}function m(){/iPhone|iPod|iPad/.test(navigator.userAgent)&&t("iframe.oftb-embedded").each(function(){0===t(this).closest("#safari_fix").length&&t(this).wrap(function(){return t('<div id="safari_fix"/>').css({width:"100%",height:"100%",overflow:"auto","z-index":"2","-webkit-overflow-scrolling":"touch"})})})}if(/Android|webOS|iPhone|iPod|iPad|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)){var x=navigator.userAgent.toLowerCase();mobile=x.search("android")>-1&&x.search("mobile")>-1||(!(x.search("android")>-1)||x.search("mobile")>-1)}var v=navigator.userAgent.toLowerCase().indexOf("chrome")>-1;"1"===OutoftheBox_vars.is_mobile&&t("html").addClass("oftb-mobile"),function(){e=t(".OutoftheBox.files, .OutoftheBox.gridgallery");if(_active)var e=t(".OutoftheBox.files");e.each(function(){var e={OutoftheBoxpath:t(this).attr("data-path"),listtoken:t(this).attr("data-token")};if(t(this).hasClass("searchlist"))return!0;a(e)}),_active=!0}(),t(".OutoftheBox.jsdisabled").removeClass("jsdisabled"),t(".OutoftheBox,#OutoftheBox").show(),t(".OutoftheBox .nav-home").click(function(){var e=t(this).closest(".OutoftheBox").attr("data-token"),o=t(this).closest(".OutoftheBox").attr("data-org-path"),i={listtoken:e};t(".OutoftheBox[id$='search-"+e+"'] .search-input").val(""),t(this).closest(".OutoftheBox").attr("data-path",o),a(i)}),t(".OutoftheBox .nav-refresh").click(function(){var e=t(this).closest(".OutoftheBox").attr("data-token"),o={listtoken:e};t(".OutoftheBox[id$='search-"+e+"'] .search-input").val(""),a(o,"hardrefresh")}),t(".OutoftheBox .nav-upload").click(function(){t(".qtip.OutoftheBox").qtip("hide");var e=t(this).closest(".gear-menu").attr("data-token"),o=t(".OutoftheBox[data-token='"+e+"']").find(".fileupload-container");t("html, body").animate({scrollTop:o.offset().top},1500);for(var a=0;a<3;a++)o.find(".fileupload-buttonbar").fadeTo("slow",.5).fadeTo("slow",1)}),t(".outofthebox .linkbutton").click(function(){t(".outofthebox .thickbox_opener").removeClass("thickbox_opener"),t(this).parent().addClass("thickbox_opener"),tb_show("(Re) link to folder","#TB_inline?height=450&amp;width=800&amp;inlineId=oftb-embedded")}),t(".outofthebox .unlinkbutton").click(function(){var e=t(this),o=t(this).attr("data-user-id");t.ajax({type:"POST",url:OutoftheBox_vars.ajax_url,data:{action:"outofthebox-unlinkusertofolder",userid:o,_ajax_nonce:OutoftheBox_vars.createlink_nonce},beforeSend:function(){e.parent().find(".oftb-spinner").show()},success:function(t){"1"===t?(e.addClass("hidden"),e.prev().removeClass("hidden"),e.parent().parent().find(".column-private_folder").text("")):location.reload(!0)},complete:function(e){t(".oftb-spinner").hide()},dataType:"text"})}),t(".OutoftheBox .selected-files-delete").click(function(){var e=t(this).closest(".gear-menu").attr("data-token");t(".qtip.OutoftheBox").qtip("hide");var o=readArrCheckBoxes(".OutoftheBox[data-token='"+e+"'] input[name='selected-files[]']");if(0===o.length)return!1;var a="";t.each(o,function(){a+="<li>"+t('.entry[data-id="'+this+'"]').attr("data-name")+"</li>"}),t("#outofthebox-modal-action").remove();var n="";n+='<button class="button outofthebox-modal-confirm-btn" data-action="confirm" type="button" title="'+OutoftheBox_vars.str_delete_title+'" >'+OutoftheBox_vars.str_delete_title+"</button>",n+='<button class="button outofthebox-modal-cancel-btn" data-action="cancel" type="button" onclick="modal_action.close();" title="'+OutoftheBox_vars.str_cancel_title+'" >'+OutoftheBox_vars.str_cancel_title+"</button>";var s=t('<a tabindex="0" class="close-button" title="'+OutoftheBox_vars.str_close_title+'" onclick="modal_action.close();"><i class="fa fa-times fa-lg" aria-hidden="true"></i></a></div>'),r=t('<div class="outofthebox-modal-body" tabindex="0" >'+OutoftheBox_vars.str_delete+"</br></br><ul>"+a+"</ul></div>"),l=t('<div class="outofthebox-modal-footer"><div class="outofthebox-modal-buttons">'+n+"</div></div>"),d=t('<div id="outofthebox-modal-action" class="OutoftheBox outofthebox-modal '+OutoftheBox_vars.content_skin+'"><div class="modal-dialog"><div class="modal-content"></div></div></div>');t("body").append(d),t("#outofthebox-modal-action .modal-content").append(s,r,l),t("#outofthebox-modal-action .outofthebox-modal-confirm-btn").unbind("click"),t("#outofthebox-modal-action .outofthebox-modal-confirm-btn").click(function(){i({action:"outofthebox-delete-entries",entries:o,listtoken:e,_ajax_nonce:OutoftheBox_vars.delete_nonce}),t("#outofthebox-modal-action .outofthebox-modal-confirm-btn").prop("disabled",!0),t("#outofthebox-modal-action .outofthebox-modal-confirm-btn").html('<i class="fa fa-cog fa-spin fa-fw"></i><span> '+OutoftheBox_vars.str_processing+"</span>")});var u=new RModal(document.getElementById("outofthebox-modal-action"),{dialogOpenClass:"animated slideInDown",dialogCloseClass:"animated slideOutUp",escapeClose:!0});return document.addEventListener("keydown",function(t){u.keydown(t)},!1),u.open(),window.modal_action=u,!1}),t(".OutoftheBox .nav-gear").each(function(){var e=t(this).closest(".OutoftheBox").attr("data-token");t(this).qtip({prerender:!0,id:"nav-"+e,content:{text:t(this).next(".gear-menu")},position:{my:"top right",at:"bottom center",target:t(this).find("i"),viewport:t(window),adjust:{scroll:!1}},style:{classes:"OutoftheBox "+OutoftheBox_vars.content_skin},show:{event:"click, mouseenter",solo:!0},hide:{event:"mouseleave unfocus",fixed:!0,delay:200},events:{show:function(o,a){var i=readArrCheckBoxes(".OutoftheBox[data-token='"+e+"'] input[name='selected-files[]']");a.elements.content.find(".all-files-to-zip").parent().show(),0===i.length?(a.elements.content.find(".selected-files-to-zip").parent().hide(),a.elements.content.find(".selected-files-delete").parent().hide()):(a.elements.content.find(".selected-files-to-zip").parent().show(),a.elements.content.find(".selected-files-delete").parent().show()),a.elements.content.find("ul > li").not(".gear-menu-no-options").filter(function(){return"none"!==t(this).css("display")}).length>0?a.elements.content.find(".gear-menu-no-options").hide():a.elements.content.find(".gear-menu-no-options").show()}}})}),t(".OutoftheBox .nav-search").each(function(){var e=t(this).closest(".OutoftheBox").attr("data-token");t(this).qtip({prerender:!0,id:"search-"+e,content:{text:t(this).next(".search-div"),button:t(this).next(".search-div").find(".search-remove")},position:{my:"top right",at:"bottom center",target:t(this).find("i"),viewport:t(window),adjust:{scroll:!1}},style:{classes:"OutoftheBox search "+OutoftheBox_vars.content_skin},show:{effect:function(){t(this).fadeTo(90,1,function(){t("input",this).focus()})}},hide:{fixed:!0,delay:1500}})}),t(".OutoftheBox .search-input").each(function(){t(this).on("keyup",function(e){var o=t(this).closest(".OutoftheBox").attr("id").replace(/.*search-/,"");if(t(this).val().length>0){t(".OutoftheBox[data-token='"+o+"'] .loading").addClass("search"),t(".OutoftheBox[data-token='"+o+"'] .nav-search").addClass("inuse"),t(".OutoftheBox[data-token='"+o+"'] .searchlist .loading, .OutoftheBox[data-token='"+o+"'] .searchlist .ajax-filelist").show(),clearTimeout(_updatetimer);var i={listtoken:o};_updatetimer=setTimeout(function(){t("#OutoftheBox .searchlist .loading, #OutoftheBox .searchlist .ajax-filelist").show(),a(i)},1e3)}else t(".OutoftheBox[data-token='"+o+"'] .nav-search").removeClass("inuse"),t(".OutoftheBox[data-token='"+o+"']").hasClass("searchlist")&&(t(".OutoftheBox[data-token='"+o+"'].searchlist .loading, .OutoftheBox[data-token='"+o+"'].searchlist .ajax-filelist").hide(),t(".OutoftheBox[data-token='"+o+"'].searchlist .ajax-filelist").html(""))}),t(this).parent().find(".submit-search").click(function(){var e=t(this).closest(".OutoftheBox").attr("id").replace(/.*search-/,"");if(t(this).val().length>0){t(".OutoftheBox[data-token='"+e+"'] .searchlist .loading, .OutoftheBox[data-token='"+e+"'] .searchlist .ajax-filelist").show(),clearTimeout(_updatetimer);var o={listtoken:e};_updatetimer=setTimeout(function(){a(o)},1)}else t(".OutoftheBox[data-token='"+e+"'].searchlist .loading, .OutoftheBox[data-token='"+e+"'].searchlist .ajax-filelist").hide(),t(".OutoftheBox[data-token='"+e+"'].searchlist .ajax-filelist").html("")})}),t(".OutoftheBox .search-remove").click(function(){""!==t(this).parent().find(".search-input").val()&&(t(this).parent().find(".search-input").val(""),t(this).parent().find(".search-input").trigger("keyup"))}),t(".OutoftheBox .sortable").click(function(){var e=t(this).closest(".OutoftheBox").attr("data-token"),o="asc";t(this).hasClass("asc")&&(o="desc"),t(".OutoftheBox[data-token='"+e+"'] .sortable").removeClass("asc").removeClass("desc"),t(this).addClass(o);var i=t(this).attr("data-sortname")+":"+o;t(".OutoftheBox[data-token='"+e+"']").attr("data-sort",i);var n={listtoken:e};clearTimeout(_updatetimer),_updatetimer=setTimeout(function(){a(n)},300)}),t(".select-all-files").click(function(){t(this).closest(".OutoftheBox").find(".selected-files:checkbox").prop("checked",t(this).prop("checked")),!0===t(this).prop("checked")?t(this).closest(".OutoftheBox").find(".selected-files:checkbox").show():t(this).closest(".OutoftheBox").find(".selected-files:checkbox").hide()}),t(".OutoftheBox .all-files-to-zip, .OutoftheBox .selected-files-to-zip").click(function(e){var o=OutoftheBox_vars.ajax_url,a=t(this).closest(".gear-menu").attr("data-token"),i={action:"outofthebox-create-zip",listtoken:a,lastpath:t(".OutoftheBox[data-token='"+a+"']").attr("data-path"),_ajax_nonce:OutoftheBox_vars.createzip_nonce};t(e.target).hasClass("all-files-to-zip")&&t(".OutoftheBox[id$='search-"+a+"'] .search-input").length>0&&""!==t(".OutoftheBox[id$='search-"+a+"'] .search-input").val()&&(t(".OutoftheBox[data-token='"+a+"'] .select-all-files").trigger("click"),i.files=readArrCheckBoxes(".OutoftheBox[data-token='"+a+"'] input[name='selected-files[]']")),t(e.target).hasClass("selected-files-to-zip")&&(i.files=readArrCheckBoxes(".OutoftheBox[data-token='"+a+"'] input[name='selected-files[]']")),t(".qtip.OutoftheBox").qtip("hide"),t(this).attr("href",o+"?"+t.param(i))}),window.updateCollage=function(e){var o=t(".OutoftheBox.gridgallery[data-token='"+e+"']"),a=o.find(".image-collage");a.outerWidth(o.find(".ajax-filelist").width()-1,!0);var i=o.attr("data-targetheight");a.removeWhitespace().collagePlus({targetHeight:i,fadeSpeed:"slow",allowPartialLastRow:!0}),o.find(".entry.hidden-for-gallery").hide(),o.find("img.preloading").not(".hidden-for-gallery").unveil(200,t(window),function(){t(this).load(function(){t(this).removeClass("preloading").removeAttr("data-src"),t(this).prev(".preloading").remove()})}),a.fadeTo(1500,1),o.find(".image-container").each(function(){var e=t(this).find(".folder-thumb");t(this).find(".image-folder-img").width(t(this).width()).height(t(this).height()),e.length>0&&(e.width(t(this).width()).height(t(this).height()),t(this).find(".image-folder-img").hide())}),_thumbTimer&&clearInterval(_thumbTimer),n(),_thumbTimer=setInterval(n,15e3)},v||t(".upload-multiple-files").parent().remove();var b={},_=0;t(".OutoftheBox .fileuploadform").each(function(){if(t(this).closest(".upload").length>0&&-1==document.cookie.indexOf("OftB-ID=")){var e=new Date;e.setTime(e.getTime()+6048e5);var o="; expires="+e.toUTCString(),a=Math.random().toString(36).substr(2,16);document.cookie="OftB-ID="+a+o+"; path="+OutoftheBox_vars.cookie_path+"; domain="+OutoftheBox_vars.cookie_domain+";"}t(this).fileupload({url:OutoftheBox_vars.ajax_url,type:"POST",dataType:"json",autoUpload:!0,maxFileSize:OutoftheBox_vars.post_max_size,acceptFileTypes:new RegExp(t(this).find('input[name="acceptfiletypes"]').val(),"i"),dropZone:t(this).closest(".OutoftheBox"),messages:{maxNumberOfFiles:OutoftheBox_vars.maxNumberOfFiles,acceptFileTypes:OutoftheBox_vars.acceptFileTypes,maxFileSize:OutoftheBox_vars.maxFileSize,minFileSize:OutoftheBox_vars.minFileSize},limitConcurrentUploads:3,disableImageLoad:!0,disableImageResize:!0,disableImagePreview:!0,disableAudioPreview:!0,disableVideoPreview:!0,uploadTemplateId:null,downloadTemplateId:null,add:function(e,o){var a=t(this).attr("data-token");t.each(o.files,function(t,e){_++,e.hash=e.name.hashCode()+"_"+Math.floor(1e6*Math.random()),e.listtoken=a;d(e=r(e));!1!==e.error&&o.files.splice(t,1)}),(o.autoUpload||!1!==o.autoUpload&&t(this).fileupload("option","autoUpload"))&&o.files.length>0&&o.process().done(function(){o.submit()})}}).on("fileuploadsubmit",function(e,o){var a=t(this).attr("data-token");t(".OutoftheBox[data-token='"+a+"'] .loading").addClass("upload"),t(".OutoftheBox[data-token='"+a+"'] .loading").fadeTo(400,1);var i;t.each(o.files,function(t,e){u(e),i=e.hash}),t(".gform_button:submit").prop("disabled",!0).fadeTo(400,.3),o.formData={action:"outofthebox-upload-file",type:"do-upload",hash:i,lastpath:t(".OutoftheBox[data-token='"+a+"']").attr("data-path"),listtoken:a,_ajax_nonce:OutoftheBox_vars.upload_nonce}}).on("fileuploadprogress",function(e,o){var a=parseInt(o.loaded/o.total*100,10)/2;t.each(o.files,function(t,e){c(e,{percentage:a,progress:"uploading_to_server"}),a>=50&&(c(e,{percentage:50,progress:"uploading_to_cloud"}),setTimeout(function(){l(e)},2e3))})}).on("fileuploadstopped",function(){t(".gform_button:submit").prop("disabled",!1).fadeTo(400,1)}).on("fileuploaddone",function(t,e){sendGooglePageView("Upload file")}).on("fileuploadalways",function(e,o){void 0!==o.result?void 0!==o.result.status?"finished"!==o.result.status.progress&&"failed"!==o.result.status.progress||h(o.result.file):(o.result.file.error=OutoftheBox_vars.str_error,h(o.result.file)):t.each(o.files,function(t,e){e.error=OutoftheBox_vars.str_error,h(e)})}).on("fileuploaddrop",function(e,o){var a=t(this);t("html, body").animate({scrollTop:a.offset().top},1500)})}),t(document).bind("dragover",function(e){var o=t(".OutoftheBox .fileuploadform").closest(".OutoftheBox"),a=window.dropZoneTimeout;a?clearTimeout(a):o.addClass("in");var i=!1,n=e.target;do{if(t(n).is(o)){i=!0;break}n=n.parentNode}while(null!==n);i?t(n).addClass("hover"):o.removeClass("hover"),window.dropZoneTimeout=setTimeout(function(){window.dropZoneTimeout=null,o.removeClass("in hover")},100)}),t(document).bind("drop dragover",function(t){t.preventDefault()}),_windowwidth=t(window).width(),t(window).resize(function(){_windowwidth!==t(window).width()?(_windowwidth=t(window).width(),t(".OutoftheBox.media.video .jp-jplayer").each(function(){var e=t(this).data().jPlayer.status;if(0!==e.videoHeight&&0!==e.videoWidth){var o=e.videoWidth/e.videoHeight,a=t(this);if(t(this).find("object").length>0)i=t(this).find("object");else var i=t(this).find("video");a.height()!==a.width()/o&&(screen.height>=a.width()/o||"jp-video-full"!==e.cssClass?(i.height(i.width()/o),a.height(i.width()/o)):(i.width(screen.height*o),a.width(screen.height*o))),t(this).parent().find(".jp-video-play").height(a.height())}}),_resizeTimer&&clearTimeout(_resizeTimer),t(".OutoftheBox .image-collage").fadeTo(100,0),_resizeTimer=setTimeout(function(){t(".OutoftheBox .image-collage").each(function(){var e=t(this).closest(".OutoftheBox").attr("data-token");updateCollage(e)})},500)):_windowwidth=t(window).width()});readArrCheckBoxes=function(e){return t(e+":checked").map(function(){return this.value}).get()},m(),t.fn.isOnScreen=function(e,o){null!=e&&void 0!==e||(e=1),null!=o&&void 0!==o||(o=1);var a=t(window),i={top:a.scrollTop(),left:a.scrollLeft()};i.right=i.left+a.width(),i.bottom=i.top+a.height();var n=this.outerHeight(),s=this.outerWidth();if(!s||!n)return!1;var r=this.offset();if(r.right=r.left+s,r.bottom=r.top+n,!!(i.right<r.left||i.left>r.right||i.bottom<r.top||i.top>r.bottom))return!1;var l={top:Math.min(1,(r.bottom-i.top)/n),bottom:Math.min(1,(i.bottom-r.top)/n),left:Math.min(1,(r.right-i.left)/s),right:Math.min(1,(i.right-r.left)/s)};return l.left*l.right>=e&&l.top*l.bottom>=o}})}function sendGooglePageView(t,e){"1"===OutoftheBox_vars.google_analytics&&("undefined"!=typeof ga&&null!==ga?ga("send","event","Out-of-the-Box",t,e):"undefined"!=typeof _gaq&&null!==_gaq&&_gaq.push(["_trackEvent","Out-of-the-Box",t,e]))}function humanFileSize(t,e){var o=e?1e3:1024;if(Math.abs(t)<o)return t+" B";var a=e?["kB","MB","GB","TB","PB","EB","ZB","YB"]:["KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"],i=-1;do{t/=o,++i}while(Math.abs(t)>=o&&i<a.length-1);return t.toFixed(1)+" "+a[i]}var _active=!1,_updatetimer,_resizeTimer=null,_thumbTimer=null,_uploadPostProcesstimer=null,readArrCheckBoxes,oftb_playlists={},_DBcache={},_DBuploads={},mobile=!1,_windowwidth,DB_iLightbox={};String.prototype.hashCode=function(){var t,e=0;if(0===this.length)return e;for(t=0,l=this.length;t<l;t++)e=(e<<5)-e+this.charCodeAt(t),e|=0;return Math.abs(e)},Function.prototype.debounce=function(t){var e,o=this;return function(){var a=this,i=arguments;window.clearTimeout(e),e=window.setTimeout(function(){o.apply(a,i)},t)}},initate_out_of_the_box();